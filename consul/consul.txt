agent 有两种模式 server模式和client模式，唯一的区别就是client模式不参与选举

./consul agent -server -bootstrap-expect 3 -data-dir /tmp/consul -node=server001 -bind=10.31.63.15 -client=0.0.0.0 -ui
		-client 设置监听地址，外网可以访问
./consul agent -server -data-dir /tmp/consul -node=server002 -bind=10.31.63.17 -join 10.31.63.15
./consul agent -server -data-dir /tmp/consul -node=server003 -bind=10.31.63.18 -join 10.31.63.15

./consul agent -data-dir /tmp/consul -node=client -bind=10.31.63.11 -join 10.31.63.15


consul agent -dev
	  -dev 开发模式
~/gowork/src/github.com/dongxiaozhen/lbbconsul/example/server ./server 
~/gowork/src/github.com/dongxiaozhen/lbbconsul/example/server ./server -port 9528 -sid serverNode_1_2 -maddr "127.0.0.1:8880"
~/gowork/src/github.com/dongxiaozhen/lbbconsul/example/client ./client


serverId 相同会覆盖前面的服务,后一个服务注消会让前一个也注销，所以serverId 必须唯一，不能重复

查询集群成员
	consul members
	curl http://localhost:8500/v1/status/peers

查询集群leader
	curl http://localhost:8500/v1/status/leader


查询节点
dig @127.0.0.1 -p 8600 namexx.node.consul

查询服务
dig @127.0.0.1 -p 8600 namexxx.service.consul SRV
	获取serverName
		curl http://localhost:8500/v1/catalog/services
	获取serverName为namexxx的所有服务
		curl http://localhost:8500/v1/catalog/service/namexxx
	根据健康状态检测服务
		curl http://localhost:8500/v1/health/service/namexxx

查询状态 (passing, warning,critical,)
	查询状态为xxx的服务
		curl http://localhost:8500/v1/health/state/xxx
	查询serverName为namexxx的状态
		curl http://localhost:8500/v1/health/checks/namexxx


健康检查
    1,设置Interval，并设置Script，HTTP，TCP，GRPC中的一个
      1.1  Script+ Interval 
      1.2 HTTP+ Interval 这种检查将按照预设的时间间隔创建一个HTTP “get”请求。HTTP响应代码来标示服务所处状态.RL.  any 2xx code is considered passing, a 429 Too Many Requests is a warning, and anything else is a failure
      1.3 TCP+ Interval 将按照预设的时间间隔与指定的IP/Hostname和端口创建一个TCP连接
    2,设置TTL，(Timeto Live)  这种checks为给定TTL保留了最后一种状态，checks的状态必须通过HTTP接口周期性更新，如果外部接口没有更新状态，那么状态就会被认定为不正常。
    注：Interval和TTL不能同时设置。

