
thift 处理连接，在common.RpcHandler 中注册函数就行,每个client一个Goroute
rpc  func(rq *protoservice.ProtoRequest) *protoservice.ProtoReply

	type ProtoRequest struct {                                                                                                                                                                                                                                            
		Type       int32  `thrift:"type,1" json:"type"`
		Content    []byte `thrift:"content,2" json:"content"`
		ShardingID int64  `thrift:"sharding_id,3" json:"sharding_id"`
	}
	
	type ProtoReply struct {                                                                                                                                                                                                                                              
		Result_ int64  `thrift:"result,1" json:"result"`                                                                                                                                                                                 
		Type    int32  `thrift:"type,2" json:"type"`                                                                                                                                                                                     
		Content []byte `thrift:"content,3" json:"content"`                                                                                                                                                                               
	}
	
	
开启1024个goroutine处理handle，每个client开启一个read goroutine, 解包后分发到1024个G中的一个goroutine 的chan中，goroutine从特定的chan中读出数据然后处理，处理的结果会放到client的send chan中，监听send chan的goroutine处理发送(route中传递了conn)
ChannelPacketProcessor   func(packet *NetPacket)  使用了FkServer
	type NetPacket struct {                                                                                                                                                                                                                                          
		Nc   *FkConn
		Data []byte
		*ESPacket
	}                                                                                                                                                                                                        
	
	type ESPacket struct {                                                                                                                                                                                                                                      
		Pack_len  uint16
		Pack_type uint16
		User_id   uint64
		Token     uint32
		Es_id     uint32
		Session   uint64
	}

	
NewFkServer
	listen 端口，开启read,send 连个Goroutine
	
	
	
TypeRouteProcessor   封装了ChannelPacketProcessor ,使用了FkServer
	defaultRoute 找到route,发送出去，route接收到结果后找到client,然后发给client
					   ___________
	------------------|        r1| ---------->server1
					  | -----    |
	------------------| l024G|   |
					  | -----    |  
	------------------|        r2|------------->server2
					  |__________|
					  
					  
rpcProxy
	RpcProxyHander 实现了RpcHandler，找到route转发出去，收到结果return
